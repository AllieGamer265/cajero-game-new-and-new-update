<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Configuraci√≥n b√°sica del documento y metadatos -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Banco Gamer</title>

    <!-- Importaci√≥n de Firebase: Necesario para la persistencia de datos en la nube -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div id="cajero">
        <!-- PANTALLA 0: CONFIGURACI√ìN FIREBASE (Se muestra si no hay conexi√≥n configurada) -->
        <div class="pantalla hidden" id="pantalla-config">
            <h1>‚öôÔ∏è CONFIGURACI√ìN</h1>
            <p>Necesitamos conectar con la Nube (Firebase).</p>
            <p style="font-size: 0.8rem;">Pega tu configuraci√≥n aqu√≠ abajo en el c√≥digo o pide ayuda para generarla.</p>
        </div>

        <!-- PANTALLA 1: REGISTRO - Permite a nuevos usuarios crear una cuenta -->
        <div class="pantalla hidden" id="pantalla-registro">
            <h1>üè¶ BANCO GAMER üè¶</h1>
            <p>¬°Bienvenida! Crea tu cuenta en la nube.</p>
            <input type="text" id="regNombre" placeholder="Tu Nombre de Jugadora">
            <input type="number" id="regPin" placeholder="Crea un PIN (4 d√≠gitos)">
            <p style="color: #27ae60; font-weight: bold;">üí∞ Bono de Bienvenida: $1,000</p>
            <button onclick="crearCuenta()" style="margin-top: 10px; width: 100%;">CREAR CUENTA ‚ñ∫</button>
            <p style="font-size: 0.8rem; margin-top: 10px; cursor: pointer; text-decoration: underline;"
                onclick="mostrarPantalla('pantalla-login')">¬øYa tienes cuenta? Inicia Sesi√≥n</p>
        </div>

        <!-- PANTALLA 2: LOGIN - Acceso para usuarios registrados -->
        <div class="pantalla hidden" id="pantalla-login">
            <h1>üîê INICIAR SESI√ìN</h1>
            <p>Con√©ctate a tu cuenta.</p>
            <input type="text" id="loginNombre" placeholder="Tu Nombre">
            <input type="number" id="loginPin" placeholder="Tu PIN">
            <div id="loadingLogin" class="hidden">‚åõ Buscando en la nube...</div>
            <button onclick="iniciarSesion()" style="margin-top: 10px; width: 100%;">ENTRAR ‚ñ∫</button>
            <p style="font-size: 0.8rem; margin-top: 10px; cursor: pointer; text-decoration: underline;"
                onclick="mostrarPantalla('pantalla-registro')">¬øNo tienes cuenta? Reg√≠strate</p>
        </div>

        <!-- PANTALLA 3: DASHBOARD CAJERO - Interfaz principal del usuario -->
        <div class="pantalla hidden" id="pantalla-cajero">
            <div class="info-tablero">
                <p>Hola, <span id="nombreUsuarioDisplay">---</span></p>
                <p>Saldo: üí∞ <span id="saldoDisplay">---</span></p>
            </div>

            <!-- Bot√≥n para solicitar dinero al administrador -->
            <button onclick="pedirDinero()"
                style="width: 100%; background-color: #2ecc71; font-size: 16px; padding: 15px; font-weight: bold; margin-bottom: 10px;">
                ‚ûï SOLICITAR DINERO
            </button>

            <!-- Secci√≥n de Transferencias: Enviar dinero a otros usuarios -->
            <div class="transfer-section">
                <p style="margin:0 0 5px 0; font-weight:bold;">üí∏ ENVIAR DINERO A:</p>
                <input type="text" id="destinatarioNombre" placeholder="Nombre completo del amigo">
                <input type="number" id="montoTransferencia" placeholder="Cantidad a enviar">
                <button onclick="transferirDinero()"
                    style="width: 100%; background-color: #3498db; font-size: 14px; padding: 10px; margin-top:0;">ENVIAR
                    AHORA ‚ñ∫</button>
            </div>

            <!-- MERCADO GAMER: Sistema de trading con criptomonedas ficticias -->
            <div class="market-section">
                <p style="margin:0; font-weight:bold; color: #f1c40f;">üìà MERCADO GAMER</p>
                <div style="display: flex; justify-content: space-between; align-items: center; margin: 10px 0;">
                    <div style="text-align: left;">
                        <span style="font-size: 0.8rem;">Precio Coin:</span><br>
                        <span id="txtPrecioMercado" style="font-size: 1.5rem; font-weight: bold;">---</span>
                    </div>
                    <div style="text-align: right;">
                        <span style="font-size: 0.8rem;">Tus Coins:</span><br>
                        <span id="txtMisCriptos" style="font-size: 1.5rem; font-weight: bold; color: #f1c40f;">0</span>
                    </div>
                </div>
                <div style="display: flex; gap: 5px;">
                    <button onclick="comprarCripto()"
                        style="flex: 1; font-size: 0.8rem; padding: 8px; background: #27ae60;">COMPRAR (1)</button>
                    <button onclick="venderCripto()"
                        style="flex: 1; font-size: 0.8rem; padding: 8px; background: #c0392b;">VENDER (1)</button>
                </div>

                <!-- Botones de acceso a juegos y utilidades -->
                <div style="display: flex; gap: 5px; margin-top: 15px;">
                    <button onclick="abrirCasino()"
                        style="flex: 1; background: linear-gradient(45deg, #e67e22, #d35400); color: white; border: 2px solid #f39c12; font-size: 0.9rem; padding: 10px;">
                        üé∞ CASINO
                    </button>
                    <button onclick="verRanking()"
                        style="flex: 1; background: linear-gradient(45deg, #f1c40f, #f39c12); color: white; border: 2px solid #fff; font-size: 0.9rem; padding: 10px;">
                        üèÜ RANKING
                    </button>
                </div>
                <button onclick="abrirTienda()"
                    style="width: 100%; margin-top: 10px; background: linear-gradient(45deg, #2980b9, #2c3e50); color: white; border: 2px solid #3498db; font-size: 1rem; padding: 12px;">
                    üõí TIENDA DE SKINS
                </button>
                <button onclick="abrirLoteria()"
                    style="width: 100%; margin-top: 10px; background: linear-gradient(45deg, #f39c12, #e67e22); color: #2c3e50; border: 2px solid #fff; font-size: 1rem; padding: 12px; font-weight: bold;">
                    üéüÔ∏è SORTEO DIARIO (2 PM)
                </button>
            </div>

            <!-- Secci√≥n de Historial: Muestra los √∫ltimos movimientos de la cuenta -->
            <div id="historial-container">
                <p style="margin:0 0 5px 0; font-weight:bold;">üìú HISTORIAL</p>
                <ul id="listaMovimientos">
                    <!-- Los movimientos se insertan din√°micamente aqu√≠ -->
                </ul>
            </div>

            <button onclick="cerrarSesion()"
                style="margin-top: 20px; width: 100%; background-color: #95a5a6; font-size: 0.9rem; padding: 10px;">CERRAR
                SESI√ìN</button>
        </div>

        <!-- PANTALLA 5: CASINO - Juego de tragamonedas -->
        <div class="pantalla hidden" id="pantalla-casino">
            <h1>üé∞ CASINO GAMER üé∞</h1>
            <p>¬°Prueba tu suerte! (x10 Jackpot)</p>

            <div class="info-tablero" style="border-bottom: none; margin-bottom: 5px;">
                <p>Saldo: üí∞ <span id="saldoCasinoDisplay">---</span></p>
            </div>

            <div class="slot-machine">
                <div class="slot-reel" id="reel1">üçí</div>
                <div class="slot-reel" id="reel2">7Ô∏è‚É£</div>
                <div class="slot-reel" id="reel3">üíé</div>
            </div>

            <!-- Configuraci√≥n de apuesta -->
            <div style="background: rgba(0,0,0,0.2); padding: 10px; border-radius: 5px;">
                <p style="margin: 0 0 5px 0;">Tu Apuesta:</p>
                <div style="display: flex; gap: 5px; justify-content: center;">
                    <button onclick="fijarApuesta(10)" class="btn-mini" style="background: #34495e;">$10</button>
                    <button onclick="fijarApuesta(50)" class="btn-mini" style="background: #34495e;">$50</button>
                    <button onclick="fijarApuesta(100)" class="btn-mini" style="background: #34495e;">$100</button>
                </div>
                <input type="number" id="montoApuesta" value="10" min="1"
                    style="width: 50%; text-align: center; margin-top: 5px;">
            </div>

            <button onclick="jugarCasino()" id="btnSpin"
                style="margin-top: 15px; width: 100%; background-color: #27ae60; font-size: 1.2rem;">
                GIRAR (SPIN) üé≤
            </button>

            <button onclick="mostrarPantalla('pantalla-cajero')"
                style="margin-top: 10px; width: 100%; background-color: #7f8c8d; font-size: 0.9rem;">
                Volver al Banco
            </button>
        </div>

        <!-- PANTALLA 6: TIENDA - Permite comprar iconos y cosm√©ticos -->
        <div class="pantalla hidden" id="pantalla-tienda">
            <h1>üõí TIENDA GAMER</h1>
            <p>Personaliza tu perfil</p>

            <div class="info-tablero" style="border-bottom: none; margin-bottom: 5px;">
                <p>Tu Saldo: üí∞ <span id="saldoTiendaDisplay">---</span></p>
            </div>

            <div class="shop-grid" id="contenedorTienda">
                <!-- Se llena con JS con los productos disponibles -->
                <p>Cargando cat√°logo...</p>
            </div>

            <button onclick="mostrarPantalla('pantalla-cajero')"
                style="margin-top: 20px; width: 100%; background-color: #7f8c8d;">
                VOLVER AL BANCO
            </button>
        </div>

        <!-- PANTALLA: LOTER√çA - Sorteo acumulado diario -->
        <div class="pantalla hidden" id="pantalla-loteria">
            <h1>üéüÔ∏è SORTEO NACIONAL üéüÔ∏è</h1>
            <p>¬°El pozo se acumula con cada boleto vendido!</p>

            <div class="jackpot-box">
                $<span id="pozoLoteriaDisplay">0.00</span>
            </div>

            <div class="lottery-timer">
                Pr√≥ximo sorteo en: <span id="lotteryTimer">--:--:--</span>
            </div>

            <div class="lottery-info">
                <p style="margin: 0; font-weight: bold; color: #f1c40f;">PRECIO: $2,000</p>
                <p style="margin: 5px 0 0 0; font-size: 0.8rem;">Cuantos m√°s boletos compres, m√°s chances tienes.</p>
            </div>

            <button onclick="comprarBoleto()"
                style="width: 100%; background-color: #2ecc71; font-size: 1.1rem; padding: 15px; font-weight: bold;">
                COMPRAR BOLETO
            </button>

            <button onclick="mostrarPantalla('pantalla-cajero')"
                style="margin-top: 20px; width: 100%; background-color: #7f8c8d; font-size: 0.9rem;">
                VOLVER AL BANCO
            </button>
        </div>

    </div>

    <!-- PANTALLA RANKING: Lista de usuarios con m√°s dinero -->
    <div class="pantalla hidden" id="pantalla-ranking">
        <h1>üèÜ TOP MILLONARIOS üèÜ</h1>
        <p>¬øQui√©n domina el servidor?</p>

        <div style="max-height: 400px; overflow-y: auto;">
            <ul class="ranking-list" id="listaRanking">
                <!-- Los items del ranking se insertan con JavaScript -->
                <li>Cargando...</li>
            </ul>
        </div>

        <button onclick="mostrarPantalla('pantalla-cajero')"
            style="margin-top: 20px; width: 100%; background-color: #7f8c8d;">
            VOLVER AL BANCO
        </button>
    </div>

    <!-- PANTALLA: DUELO GAMER - Batalla 1vs1 -->
    <div class="pantalla hidden" id="pantalla-duelo">
        <h1>‚öîÔ∏è DUELO GAMER ‚öîÔ∏è</h1>
        <div id="infoApostadores"
            style="display: flex; justify-content: space-around; align-items: center; margin-bottom: 20px;">
            <div id="duelRetador" style="text-align: center;">---</div>
            <div style="font-size: 2rem; font-weight: bold; color: #f1c40f;">VS</div>
            <div id="duelOponente" style="text-align: center;">---</div>
        </div>

        <div id="arenaDuelo"
            style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
            <p style="font-weight: bold; color: #f1c40f;">APUESTA: $<span id="montoApuestaDuelo">0</span></p>
            <div style="display: flex; justify-content: space-around; font-size: 3rem;">
                <div id="rollRetador">?</div>
                <div id="rollOponente">?</div>
            </div>
            <p id="txtEstadoDuelo">Esperando a que comience la batalla...</p>
        </div>

        <button id="btnLanzarDuelo" onclick="lanzarDadosDuelo()"
            style="width: 100%; background: #e67e22; display: none;">¬°LANZAR N√öMERO! üé≤</button>

        <button onclick="mostrarPantalla('pantalla-cajero')" id="btnSalirDuelo"
            style="margin-top: 10px; width: 100%; background-color: #7f8c8d;">SALIR</button>
    </div>

    <!-- CONTENEDOR DE NOTIFICACIONES (Retos entrantes) -->
    <div id="notificaciones-duelo" style="position: fixed; top: 20px; right: 20px; z-index: 1000; width: 250px;"></div>


    <!-- PANTALLA 4: ADMIN - Panel de administraci√≥n para gestionar usuarios y solicitudes -->
    <div id="contenedor-admin" class="hidden">
        <div class="pantalla" id="pantalla-admin">
            <h1 style="margin: 0 0 10px 0; font-size: 1.3rem;">üëë MODO PRO / ADMIN üëë</h1>
            <p style="margin: 0 0 15px 0; font-size: 0.85rem;">Panel de Control Supremo</p>

            <!-- Tabla de gesti√≥n de usuarios -->
            <table id="tablaAdmin">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>PIN</th>
                        <th>Saldo</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="listaUsuariosAdmin">
                    <!-- Lista de usuarios registrados en Firebase -->
                </tbody>
            </table>

            <!-- Tabla de solicitudes de dinero pendientes -->
            <h1 style="margin: 20px 0 10px 0; font-size: 1.3rem;">üì¨ SOLICITUDES DE DINERO</h1>
            <table id="tablaSolicitudes">
                <thead>
                    <tr>
                        <th>Jugadora</th>
                        <th>Monto</th>
                        <th>Mensaje</th>
                        <th>Acci√≥n</th>
                    </tr>
                </thead>
                <tbody id="listaSolicitudesAdmin">
                    <!-- Solicitudes enviadas por los usuarios -->
                </tbody>
            </table>
            <button onclick="cerrarSesion()"
                style="margin-top: 15px; width: 100%; background-color: #95a5a6; font-size: 0.85rem; padding: 10px;">SALIR
                DEL MODO PRO</button>
        </div>
    </div>

    <div class="teclado"></div> <!-- Espacio para teclado virtual (si se implementa) -->
    </div>

    <!-- L√≥gica de la aplicaci√≥n -->
    <script src="script.js"></script>

</body>

</html>